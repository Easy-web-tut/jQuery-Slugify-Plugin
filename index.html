<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Slugify JQuery Plugin</title>
	<meta name="author" content="Patrick McElhaney">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
  <script type="text/javascript" charset="utf-8">
    jQuery(function($) {
           
      $.fn.slugify = function (source, options) {
        var $target = $(this);            
        var $source = $(source);            
      
      	var settings = $.extend({
             slugFunc: (function (val, originalFunc) { return originalFunc(val); })
          }, options);
    	             

        var convertToSlug = function(val) {
          return settings.slugFunc(val, 
            (function(v) {
              if (!v) return '';
            	return v.replace(/'/g, '').replace(/\s*&\s*/g, ' and ').replace(/[^A-Za-z0-9]+/g, '-').replace(/^-|-$/g, '').toLowerCase();
            })  
          );
        }
    	
        var setLock = function () {
          if($target.val() != null && $target.val() != '') {
            $target.addClass('slugify-locked');
          } else {
            $target.removeClass('slugify-locked');
          }
        }   

        var updateSlug = function () {
      		if(!$target.hasClass('slugify-locked')) {
      			$target.val(convertToSlug($(this).val()));
      			$target.text(convertToSlug($(this).val()));		
      		}
      	}                   
           
        $source.keyup( updateSlug );  
        $source.change( updateSlug ); 
      
      	$target.change(function () {       
          $target.val(convertToSlug($target.val())); 
          setLock();
        });   
            
        setLock();         

      };   
    });  
  </script>  
   
  <script type="text/javascript" charset="utf-8">   
    $().ready(function () {
      $('.slug').slugify('#title', {
          slugFunc: (function(val, originalFunc) { return (originalFunc(val).toUpperCase()); } )
        }
      );      
      
      
    });      
                                  
  </script>
</head>
<body>                      
  
  
<form>
  <div>
    <label for="title">Title</label>
    <input type="text" name="title" value="title" id="title">     
  </div>              
  
  <div>
    <label for="slug" >Slug</label>
    <input type="text" name="slug" value="" id="slug" class="slug">  
  </div>   
  
  <span class="slug">test</span>
</form>
         


</body>
</html>
                                     